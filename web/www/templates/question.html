
<div class="container">
  <div class="text-left" style="margin-bottom: 10px;">
    <a type="button" class="btn btn-sm btn-primary" ui-sref="questions"><i class="form-fa fa fa-chevron-circle-left fa-fw"></i> Back</a>
  </div>
  <div ng-show="loading">
    <div class="loader"></div>
  </div>
  <div ng-show="!loading">
    <div class="box" style="margin-bottom: 20px; margin-top: 30px" id="card-box">
      <div class="box-icon">
        <img class="img-circle" style="height: 100%; width: 100%;" ng-src="{{question.author.picture}}"></img>
      </div>
      <div class="info">
        <div class="text-center">
          <h4 style="font-size: 22px;">Posted By: {{question.author.username}}</h4>
          <p class="text-muted" style="text-align: center"><i class="fa fa-calendar fa-fw"></i> {{question.date | amDateFormat: 'dddd, MMMM Do, h:mm a'}}</p>
          <div class="well well-sm well-shadow" id="question-well-sm">
            <div class="question-description">
              <p style="margin: 0;">
                {{question.content}}
              </p>
            </div>
          </div>
        </div>
        <div class="row" style="padding-top: 10px;">
          <div class="panel panel-primary">
            <div class="panel-heading">
              Answers
              <div class="pull-right">
                <a type="button" class="btn btn-sm btn-default" ng-click="openAnswerModal()" style="margin-top: -5px;" ng-disabled="isAuthor">Add New</a>
              </div>
            </div>
            <div class="panel-body">
              <div class="home-well well" ng-show="!question.answers.length">
                <strong>No answers have been posted.</strong>
              </div>
              <ul class="media-list">
                <li class="answer-media media" ng-repeat="answer in question.answers">
                  <div class="well hidden-lg hidden-md hidden-sm" style="padding: 5px 10px; margin-bottom: 0px; background-color: #ffffff;">
                    <div class="row" style="margin-left: 0px; margin-right: 0px;">
                      <figure>
                        <div class="pull-left" style="margin-right: 10px;" href="javascript:void(0)">
                          <img class="thumbnail-q img-circle" ng-src="{{answer.author.picture}}" alt="profile">
                          <figcaption class="text-center">
                            <strong class="text-q">{{answer.author.username}}</strong>
                          </figcaption>
                        </div>
                      </figure>
                      <div class="pull-left" id="fish">
                        <p class="">
                          <i class="fa fa-university fa-fw"></i> Guru Rating: {{answer.author.rating || 0}}
                        </p>
                        <p class="">
                          <i class="fa fa-star fa-fw"></i> Answer Rating: <span class="badge">{{answer.rating || 'N/A'}}</span>
                        </p>
                        <ul class="list-inline" id="comment-list">
                          <li style="padding-right: 0px;">
                            <span class="badge">{{answer.likes || 0}}</span>
                            <span class="text-success fa fa-thumbs-o-up fa-fw glyphicon-align-right" style="vertical-align:middle; width:15.4375px" ng-click="addLikeToAnswer(answer)"></span>
                          </li>
                          <li>
                            <span class="badge">{{answer.dislikes || 0}}</span>
                            <span class="text-danger fa fa-thumbs-o-down fa-fw glyphicon-align-right" style="vertical-align:middle; width:15.4375px" ng-click="addDislikeToAnswer(answer)"></span>
                          </li>
                        </ul>
                      </div>
                      <div class="col-xs-12 panel-footer" style="padding: 0px; background-color: #ffffff;">
                        <blockquote>
                          {{answer.content}}
                        </blockquote>
                        <div class="col-xs-12 panel-footer" style="padding: 0px; background-color: #ffffff;"></div>
                        <div class="chat text-center">
                          <small class="text-muted">
                            <i class="fa fa-calendar fa-fw"></i> {{answer.date | amDateFormat: 'dddd, MMMM Do, h:mm a'}}
                          </small>
                          <div class="row" ng-show="{{answer.rating}}===0 && isAuthor">
                            <button type="button" class="btn btn-primary btn-sm" ng-click="openRatingModal(answer)">Rate Answer</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="well hidden-xs" style="padding: 5px 10px; margin-bottom: 0px; background-color: #ffffff;">
                    <div class="row" style="margin-left: 0px; margin-right: 0px;">
                      <figure>
                        <div class="pull-left" style="margin-right: 10px;" href="javascript:void(0)">
                          <img class="thumbnail-q img-circle" ng-src="{{answer.author.picture}}" alt="profile">
                          <figcaption class="text-center">
                            <strong class="text-q">{{answer.author.username}}</strong>
                          </figcaption>
                        </div>
                      </figure>
                      <div class="pull-left" id="fish-lg">
                        <p class="">
                          <i class="fa fa-university fa-lg"></i> Guru Rating: {{answer.author.rating || 0}}
                        </p>
                        <p class="">
                          <i class="fa fa-star fa-lg"></i> Answer Rating: <span class="badge">{{answer.rating || 'N/A'}}</span>
                        </p>
                        <ul class="list-inline" id="comment-list">
                          <li style="padding-right: 0px;">
                            <span class="badge">{{answer.likes || 0}}</span>
                            <span class="text-success fa fa-thumbs-o-up fa-lg glyphicon-align-right" style="vertical-align:middle; width:15.4375px" ng-click="addLikeToAnswer(answer)"></span>
                          </li>
                          <li>
                            <span class="badge">{{answer.dislikes || 0}}</span>
                            <span class="text-danger fa fa-thumbs-o-down fa-lg glyphicon-align-right" style="vertical-align:middle; width:15.4375px" ng-click="addDislikeToAnswer(answer)"></span>
                          </li>
                        </ul>
                      </div>
                      <div class="col-xs-12 panel-footer" style="padding: 0px; background-color: #ffffff;">
                        <blockquote style="font-size: 14px; background-color: #ffffff;">
                          {{answer.content}}
                        </blockquote>
                        <div class="col-xs-12 panel-footer" style="padding: 0px; background-color: #ffffff;"></div>
                        <div class="chat text-center" style="background-color: #ffffff;">
                          <small class="text-muted">
                            <i class="fa fa-calendar fa-fw"></i> {{answer.date | amDateFormat: 'dddd, MMMM Do, h:mm a'}}
                          </small>
                          <div class="row" ng-show="{{answer.rating}}===0 && isAuthor">
                            <button type="button" class="btn btn-primary btn-sm" ng-click="openRatingModal(answer)">Rate Answer</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/ng-template" id="ratingModal.html">
  <div class="modal-header" style="border:0">
    <h3 class="modal-title text-center">Answer Rating:</h3>
  </div>
  <div class="modal-body" style="background-color: #2c3e50">
    <div class="container-fluid">
      <div class="well-well-shadow">
        <div class="list-group">
          <div class="list-group-item">
            <div class="text-center">
              <h4>Answer:</h4>
              <p class="lead">
                {{ratingAnswer.content}}
              </p>
            </div>
          </div>
          <div class="list-group-item text-center">
            <legend>
              Rate This Answer
            </legend>
            <div class="stars">
              <form name="answerRatingForm">
                <input class="star star-5" ng-model="stars" ng-value="5" ng-change="changeStar()" id="star-5" type="radio" name="star" ng-disabled="isRated" />
                <label class="star star-5" for="star-5"></label>
                <input class="star star-4" ng-model="stars" ng-value="4" ng-change="changeStar()" id="star-4" type="radio" name="star" ng-disabled="isRated" />
                <label class="star star-4" for="star-4"></label>
                <input class="star star-3" ng-model="stars" ng-value="3" ng-change="changeStar()" id="star-3" type="radio" name="star" ng-disabled="isRated" />
                <label class="star star-3" for="star-3"></label>
                <input class="star star-2" ng-model="stars" ng-value="2" ng-change="changeStar()" id="star-2" type="radio" name="star" ng-disabled="isRated" />
                <label class="star star-2" for="star-2"></label>
                <input class="star star-1" ng-model="stars" ng-value="1" ng-change="changeStar()" id="star-1" type="radio" name="star" ng-disabled="isRated" />
                <label class="star star-1" for="star-1"></label>
              </form>
            </div>
            <div id="starContext">

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="col-xs-12">
      <div class="col-xs-6">
        <button type="button" ng-click="submitRating()" ng-disabled="answerRatingForm.$invalid" class="btn btn-info btn-block">Submit</button>
      </div>
      <div class="col-xs-6">
        <button class="btn btn-danger btn-block" ng-click="cancel()">Cancel</button>
      </div>
    </div>
  </div>
</script>
<script type="text/ng-template" id="answerModal.html">
  <div class="modal-header" style="border: 0">
    <h3 class="modal-title text-center">Add Answer:</h3>
  </div>
  <div class="modal-body" style="background-color: #2c3e50">
    <div class="container-fluid">
      <div class="col-xs-12">
        <div class="well well-shadow hidden-xs">
          <div class="text-center">
            <h4><i class="fa fa-question-circle"></i> Question:</h4>
            <p class="lead">
              {{question.content}}
            </p>
        </div>
      </div>
      <div class="well well-shadow hidden-lg hidden-md hidden-sm" id="offset-padding-well">
        <div class="text-center">
          <h4><i class="fa fa-question-circle"></i> Question:</h4>
          <p class="lead">
            {{question.content}}
          </p>
        </div>
      </div>
      <form method="post" name="answerForm">
          <div class="well well-shadow hidden-xs">
            <div class="media">
              <div class="col-xs-2">
                <figure>
                  <div class="pull-left">
                    <img class="img-circle img-q" ng-src="{{user.picture}}" style="margin-right: 0px;"/>
                    <figcaption class="text-center">
                      <strong class="text-q ">{{user.username}}</strong>
                    </figcaption>
                  </div>
                </figure>
              </div>
              <div class="col-xs-10">
                <textarea class="form-control" rows="3" ng-model="answer.content" required></textarea>
              </div>
            </div>
          </div>
          <div class="well well-shadow hidden-lg hidden-md hidden-sm">
            <div class="media hidden-lg hidden-md hidden-sm">
              <div class="col-xs-12">
                <figure>
                  <div class="text-center">
                    <img class="img-circle img-q" ng-src="{{user.picture}}" style="margin-right: 0px;"/>
                    <figcaption class="text-center">
                      <strong class="text-q">{{user.username}}</strong>
                    </figcaption>
                  </div>
                </figure>
              </div>
              <div class="col-xs-12">
                <textarea class="form-control" rows="3" ng-model="answer.content" required></textarea>
              </div>
            </div>
          </div>
      </form>
    </div>
  </div>
  <div class="modal-footer">
    <div class="col-xs-12">
      <div class="col-xs-6">
        <button type="button" ng-click="submitAnswer()" ng-disabled="answerForm.$invalid" class="btn btn-info btn-block">Submit</button>
      </div>
      <div class="col-xs-6">
        <button class="btn btn-danger btn-block" ng-click="cancel()">Cancel</button>
      </div>
    </div>
  </div>
  </div>
</script>
